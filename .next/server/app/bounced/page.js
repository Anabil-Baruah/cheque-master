(()=>{var e={};e.id=291,e.ids=[291],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1469:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>i}),s(421),s(5495),s(5866);var a=s(3191),r=s(8716),n=s(7922),d=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let i=["",{children:["bounced",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,421)),"C:\\Users\\anabi\\OneDrive\\Desktop\\Insyd assesment\\src\\app\\bounced\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5495)),"C:\\Users\\anabi\\OneDrive\\Desktop\\Insyd assesment\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\anabi\\OneDrive\\Desktop\\Insyd assesment\\src\\app\\bounced\\page.tsx"],u="/bounced/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/bounced/page",pathname:"/bounced",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},5065:(e,t,s)=>{Promise.resolve().then(s.bind(s,4381))},4381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var a=s(326),r=s(7577),n=s(8290),d=s(5544),o=s(4976),l=s(108),i=s(119),c=s(5177),u=s(4097);let m="http://localhost:4000";var p=s(1411),x=s(1190),f=s(4794),h=s(1223);let g=r.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));g.displayName="Textarea";var b=s(4118),j=s(9280),y=s(3206);function N({status:e,className:t}){return a.jsx("span",{className:(0,h.cn)("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium","pending"===e&&"bg-warning/15 text-warning border border-warning/30","in_progress"===e&&"bg-info/15 text-info border border-info/30","recovered"===e&&"bg-success/15 text-success border border-success/30","written_off"===e&&"bg-muted text-muted-foreground border border-border",t),children:y.z2[e]})}var v=s(1724),w=s(3855),_=s(2881);let k=(0,_.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),C=(0,_.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function q(){let{cheques:e,updateCheque:t}=(0,d.C)(),[s,h]=(0,r.useState)(null),[_,q]=(0,r.useState)(!1),{followUps:D,addFollowUp:P,isAdding:R}=function(e){let{user:t}=(0,c.a)(),s=(0,o.NL)(),{data:a=[],isLoading:r}=(0,l.a)({queryKey:["followUps",e],queryFn:async()=>{if(!t||!e)return[];let s=await fetch(`${m}/follow-ups?cheque_id=${e}`);if(!s.ok)throw Error("Failed to load follow-ups");return await s.json()},enabled:!!t&&!!e}),n=(0,i.D)({mutationFn:async e=>{if(!t)throw Error("User not authenticated");let s=await fetch(`${m}/follow-ups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,user_id:t.id})});if(!s.ok)throw Error("Failed to add follow-up");return await s.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["followUps"]}),(0,u.Am)({title:"Success",description:"Follow-up recorded successfully"})},onError:e=>{(0,u.Am)({title:"Error",description:e.message,variant:"destructive"})}}),d=(0,i.D)({mutationFn:async e=>{if(!(await fetch(`${m}/follow-ups/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete follow-up")},onSuccess:()=>{s.invalidateQueries({queryKey:["followUps"]}),(0,u.Am)({title:"Success",description:"Follow-up deleted successfully"})},onError:e=>{(0,u.Am)({title:"Error",description:e.message,variant:"destructive"})}});return{followUps:a,isLoading:r,addFollowUp:n.mutate,deleteFollowUp:d.mutate,isAdding:n.isPending}}(s||void 0),[z,F]=(0,r.useState)({contact_date:"",next_follow_up_date:"",notes:"",action_taken:""}),M=e.filter(e=>"bounced"===e.status),S=e.find(e=>e.id===s),A=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(e);return a.jsx(n.L,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Bounced Cheques"}),a.jsx("p",{className:"text-muted-foreground",children:"Track and recover bounced cheques"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 bg-card rounded-xl border",children:[a.jsx("div",{className:"p-4 border-b",children:(0,a.jsxs)("h3",{className:"font-semibold",children:["Bounced Cheques (",M.length,")"]})}),a.jsx("div",{className:"divide-y max-h-[600px] overflow-y-auto",children:0===M.length?a.jsx("p",{className:"p-4 text-sm text-muted-foreground",children:"No bounced cheques"}):M.map(e=>(0,a.jsxs)("div",{onClick:()=>h(e.id),className:`p-4 cursor-pointer hover:bg-muted/50 transition-colors ${s===e.id?"bg-muted":""}`,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("p",{className:"font-medium",children:e.party_name}),e.recovery_status&&a.jsx(N,{status:e.recovery_status})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.bank_name," - #",e.cheque_number]}),a.jsx("p",{className:"text-lg font-bold mt-1",children:A(Number(e.amount))})]},e.id))})]}),a.jsx("div",{className:"lg:col-span-2 space-y-4",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-card rounded-xl border p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:S.party_name}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[S.bank_name," - Cheque #",S.cheque_number]})]}),a.jsx("p",{className:"text-2xl font-bold text-destructive",children:A(Number(S.amount))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Issue Date"}),a.jsx("p",{className:"font-medium",children:(0,v.WU)(new Date(S.issue_date),"MMM d, yyyy")})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Bounce Date"}),a.jsx("p",{className:"font-medium",children:S.bounce_date?(0,v.WU)(new Date(S.bounce_date),"MMM d, yyyy"):"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Bounce Reason"}),a.jsx("p",{className:"font-medium",children:S.bounce_reason?y.Hu[S.bounce_reason]:"-"})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Recovery Status"}),(0,a.jsxs)(j.Ph,{value:S.recovery_status||"pending",onValueChange:e=>t({id:S.id,recovery_status:e}),children:[a.jsx(j.i4,{className:"mt-1 h-8",children:a.jsx(j.ki,{})}),a.jsx(j.Bw,{children:Object.entries(y.z2).map(([e,t])=>a.jsx(j.Ql,{value:e,children:t},e))})]})]})]}),S.bounce_remarks&&a.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Remarks:"})," ",S.bounce_remarks]})})]}),(0,a.jsxs)("div",{className:"bg-card rounded-xl border",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Follow-up History"}),(0,a.jsxs)(p.z,{size:"sm",onClick:()=>q(!0),children:[a.jsx(w.Z,{className:"h-4 w-4 mr-1"}),"Add Follow-up"]})]}),a.jsx("div",{className:"divide-y max-h-[300px] overflow-y-auto",children:0===D.length?a.jsx("p",{className:"p-4 text-sm text-muted-foreground",children:"No follow-ups recorded yet"}):D.map(e=>(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(k,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-sm",children:(0,v.WU)(new Date(e.contact_date),"MMM d, yyyy")}),e.next_follow_up_date&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-auto",children:["Next: ",(0,v.WU)(new Date(e.next_follow_up_date),"MMM d")]})]}),e.action_taken&&a.jsx("p",{className:"text-sm font-medium",children:e.action_taken}),e.notes&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.notes})]},e.id))})]})]}):(0,a.jsxs)("div",{className:"bg-card rounded-xl border p-12 text-center",children:[a.jsx(C,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"font-semibold mb-2",children:"Select a Cheque"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on a bounced cheque to view details and manage recovery"})]})})]}),a.jsx(b.Vq,{open:_,onOpenChange:q,children:(0,a.jsxs)(b.cZ,{children:[a.jsx(b.fK,{children:a.jsx(b.$N,{children:"Add Follow-up"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s&&(P({cheque_id:s,contact_date:z.contact_date,next_follow_up_date:z.next_follow_up_date||null,notes:z.notes||null,action_taken:z.action_taken||null}),F({contact_date:"",next_follow_up_date:"",notes:"",action_taken:""}),q(!1))},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(f._,{children:"Contact Date"}),a.jsx(x.I,{type:"date",value:z.contact_date,onChange:e=>F({...z,contact_date:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx(f._,{children:"Action Taken"}),a.jsx(x.I,{value:z.action_taken,onChange:e=>F({...z,action_taken:e.target.value}),placeholder:"e.g., Called party, sent notice..."})]}),(0,a.jsxs)("div",{children:[a.jsx(f._,{children:"Notes"}),a.jsx(g,{value:z.notes,onChange:e=>F({...z,notes:e.target.value}),placeholder:"Additional details..."})]}),(0,a.jsxs)("div",{children:[a.jsx(f._,{children:"Next Follow-up Date"}),a.jsx(x.I,{type:"date",value:z.next_follow_up_date,onChange:e=>F({...z,next_follow_up_date:e.target.value})})]}),a.jsx(p.z,{type:"submit",className:"w-full",disabled:R,children:"Save Follow-up"})]})]})})]})})}function D(){return a.jsx(q,{})}},4118:(e,t,s)=>{"use strict";s.d(t,{$N:()=>x,Vq:()=>l,cZ:()=>m,fK:()=>p,hg:()=>i});var a=s(326),r=s(7577),n=s(8958),d=s(4019),o=s(1223);let l=n.fC,i=n.xz,c=n.h_;n.x8;let u=r.forwardRef(({className:e,...t},s)=>a.jsx(n.aV,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=n.aV.displayName;let m=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(c,{children:[a.jsx(u,{}),(0,a.jsxs)(n.VY,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(d.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=n.VY.displayName;let p=({className:e,...t})=>a.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});p.displayName="DialogHeader";let x=r.forwardRef(({className:e,...t},s)=>a.jsx(n.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=n.Dx.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(n.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})).displayName=n.dk.displayName},1190:(e,t,s)=>{"use strict";s.d(t,{I:()=>d});var a=s(326),r=s(7577),n=s(1223);let d=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));d.displayName="Input"},4794:(e,t,s)=>{"use strict";s.d(t,{_:()=>i});var a=s(326),r=s(7577),n=s(4478),d=s(9360),o=s(1223);let l=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=r.forwardRef(({className:e,...t},s)=>a.jsx(n.f,{ref:s,className:(0,o.cn)(l(),e),...t}));i.displayName=n.f.displayName},9280:(e,t,s)=>{"use strict";s.d(t,{Bw:()=>f,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var a=s(326),r=s(7577),n=s(3326),d=s(8393),o=s(6633),l=s(2933),i=s(1223);let c=n.fC;n.ZA;let u=n.B4,m=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(n.xz,{ref:r,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,a.jsx(n.JO,{asChild:!0,children:a.jsx(d.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=n.xz.displayName;let p=r.forwardRef(({className:e,...t},s)=>a.jsx(n.u_,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=n.u_.displayName;let x=r.forwardRef(({className:e,...t},s)=>a.jsx(n.$G,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(d.Z,{className:"h-4 w-4"})}));x.displayName=n.$G.displayName;let f=r.forwardRef(({className:e,children:t,position:s="popper",...r},d)=>a.jsx(n.h_,{children:(0,a.jsxs)(n.VY,{ref:d,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[a.jsx(p,{}),a.jsx(n.l_,{className:(0,i.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(x,{})]})}));f.displayName=n.VY.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(n.__,{ref:s,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n.__.displayName;let h=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(n.ck,{ref:r,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n.wU,{children:a.jsx(l.Z,{className:"h-4 w-4"})})}),a.jsx(n.eT,{children:t})]}));h.displayName=n.ck.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(n.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},3206:(e,t,s)=>{"use strict";s.d(t,{GZ:()=>n,Hu:()=>a,z2:()=>r});let a={insufficient_funds:"Insufficient Funds",signature_mismatch:"Signature Mismatch",account_closed:"Account Closed",stop_payment:"Stop Payment",stale_dated:"Stale Dated",other:"Other"},r={pending:"Pending",in_progress:"In Progress",recovered:"Recovered",written_off:"Written Off"},n={pending:"Pending",deposited:"Deposited",cleared:"Cleared",bounced:"Bounced"}},421:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\anabi\OneDrive\Desktop\Insyd assesment\src\app\bounced\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[339,937,227,214],()=>s(1469));module.exports=a})();